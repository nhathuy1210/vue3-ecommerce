"use strict";(self["webpackChunkvue3_ecommerce"]=self["webpackChunkvue3_ecommerce"]||[]).push([[163],{5163:function(e,l,t){t.r(l),t.d(l,{default:function(){return q}});var a=t(641),u=(t(8992),t(4520),t(3751)),o=t(33),r=t(953),c=t(7215);const d={class:"admin-products"},i={class:"header"},s={class:"search-bar"},n={class:"products-table"},p=["src","alt"],v=["onClick"],k=["onClick"],m={key:0,class:"modal"},L={class:"modal-content"},b={class:"form-group"},y={class:"form-group"},f=["value"],g={class:"form-group"},h={class:"form-group"},C={class:"form-group"},P={class:"form-group"},w={class:"modal-actions"},_={type:"submit"};var E={__name:"AdminProductList",setup(e){const l=(0,c.Pj)(),t=(0,r.KR)(!1),E=(0,r.KR)(!1),N=(0,r.KR)(""),A=(0,r.KR)(!1),I=(0,r.KR)({id:null,name:"",category:"",price:0,stock:0,description:"",image:""}),U=(0,a.EW)((()=>l.getters["product/getAllProducts"])),V=(0,a.EW)((()=>l.getters["product/getAllCategories"])),F=(0,a.EW)((()=>N.value?U.value.filter((e=>e.name.toLowerCase().includes(N.value.toLowerCase())||e.category.toLowerCase().includes(N.value.toLowerCase()))):U.value)),q=e=>{I.value={id:e.id,name:e.name,category:e.category,price:Number(e.price),stock:Number(e.stock),description:e.description,image:e.image},E.value=!0},K=async e=>{if(e){if(confirm("Are you sure you want to delete this product?")){A.value=!0;try{const t=await l.dispatch("product/deleteProduct",Number(e));if(!t||!t.success)throw new Error("Failed to delete product");alert("Product deleted successfully"),await l.dispatch("product/fetchProducts")}catch(t){console.error("Delete failed:",t),alert(`Failed to delete product: ${t.message}`)}finally{A.value=!1}}}else alert("Invalid product ID")},X=async()=>{if(I.value.name&&I.value.category){A.value=!0;try{if(E.value){const e=await l.dispatch("product/updateProduct",{...I.value,id:Number(I.value.id),price:Number(I.value.price),stock:Number(I.value.stock)});e&&(alert("Product updated successfully"),await l.dispatch("product/fetchProducts"))}else await l.dispatch("product/addProduct",{...I.value,price:Number(I.value.price),stock:Number(I.value.stock)}),alert("Product added successfully");J()}catch(e){console.error("Submit failed:",e),alert(`Failed to save product: ${e.message}`)}finally{A.value=!1}}else alert("Please fill in all required fields")},J=()=>{t.value=!1,E.value=!1,I.value={id:null,name:"",category:"",price:0,stock:0,description:"",image:""}};return(0,a.sV)((async()=>{A.value=!0;try{await l.dispatch("product/fetchProducts")}catch(e){console.error("Failed to fetch products:",e),alert("Failed to load products")}finally{A.value=!1}})),(e,l)=>((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",i,[(0,a.Lk)("div",s,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),placeholder:"Search products...",onInput:l[1]||(l[1]=(...l)=>e.filterProducts&&e.filterProducts(...l))},null,544),[[u.Jo,N.value]])]),(0,a.Lk)("button",{onClick:l[2]||(l[2]=e=>t.value=!0)},"Add New Product")]),(0,a.Lk)("div",n,[(0,a.Lk)("table",null,[l[9]||(l[9]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Image"),(0,a.Lk)("th",null,"Name"),(0,a.Lk)("th",null,"Category"),(0,a.Lk)("th",null,"Price"),(0,a.Lk)("th",null,"Stock"),(0,a.Lk)("th",null,"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(F.value,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.image,alt:e.name},null,8,p)]),(0,a.Lk)("td",null,(0,o.v_)(e.name),1),(0,a.Lk)("td",null,(0,o.v_)(e.category),1),(0,a.Lk)("td",null,"$"+(0,o.v_)(e.price),1),(0,a.Lk)("td",null,(0,o.v_)(e.stock),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:l=>q(e)},"Edit",8,v),(0,a.Lk)("button",{onClick:l=>K(e.id)},"Delete",8,k)])])))),128))])])]),t.value||E.value?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",L,[(0,a.Lk)("h3",null,(0,o.v_)(E.value?"Edit Product":"Add New Product"),1),(0,a.Lk)("form",{onSubmit:(0,u.D$)(X,["prevent"])},[(0,a.Lk)("div",b,[l[10]||(l[10]=(0,a.Lk)("label",null,"Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>I.value.name=e),required:""},null,512),[[u.Jo,I.value.name]])]),(0,a.Lk)("div",y,[l[11]||(l[11]=(0,a.Lk)("label",null,"Category",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>I.value.category=e),required:""},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.value,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,o.v_)(e),9,f)))),128))],512),[[u.u1,I.value.category]])]),(0,a.Lk)("div",g,[l[12]||(l[12]=(0,a.Lk)("label",null,"Price",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":l[5]||(l[5]=e=>I.value.price=e),step:"0.01",required:""},null,512),[[u.Jo,I.value.price]])]),(0,a.Lk)("div",h,[l[13]||(l[13]=(0,a.Lk)("label",null,"Stock",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":l[6]||(l[6]=e=>I.value.stock=e),required:""},null,512),[[u.Jo,I.value.stock]])]),(0,a.Lk)("div",C,[l[14]||(l[14]=(0,a.Lk)("label",null,"Description",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[7]||(l[7]=e=>I.value.description=e),required:""},null,512),[[u.Jo,I.value.description]])]),(0,a.Lk)("div",P,[l[15]||(l[15]=(0,a.Lk)("label",null,"Image URL",-1)),(0,a.bo)((0,a.Lk)("input",{type:"url","onUpdate:modelValue":l[8]||(l[8]=e=>I.value.image=e),required:""},null,512),[[u.Jo,I.value.image]])]),(0,a.Lk)("div",w,[(0,a.Lk)("button",_,(0,o.v_)(E.value?"Update":"Add")+" Product ",1),(0,a.Lk)("button",{type:"button",onClick:J},"Cancel")])],32)])])):(0,a.Q3)("",!0)]))}},N=t(6262);const A=(0,N.A)(E,[["__scopeId","data-v-5e5b92d0"]]);var I=A;const U={class:"admin-products-view"};var V={__name:"AdminProductView",setup(e){return(e,l)=>((0,a.uX)(),(0,a.CE)("div",U,[l[0]||(l[0]=(0,a.Lk)("h1",null,"Product Management",-1)),(0,a.bF)(I)]))}};const F=(0,N.A)(V,[["__scopeId","data-v-47a46309"]]);var q=F}}]);
//# sourceMappingURL=163.da5c9442.js.map