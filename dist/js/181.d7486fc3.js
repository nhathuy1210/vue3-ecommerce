"use strict";(self["webpackChunkvue3_ecommerce"]=self["webpackChunkvue3_ecommerce"]||[]).push([[181],{181:function(e,l,t){t.r(l),t.d(l,{default:function(){return A}});var a=t(641),u=(t(8992),t(4520),t(3751)),n=t(33),s=t(953),o=t(7215);const r={class:"admin-users"},i={class:"search-filters"},d={class:"users-table"},v=["onUpdate:modelValue","onChange"],k=["onUpdate:modelValue","onChange"],c=["onClick"],L=["onClick"],p={key:0,class:"modal"},m={class:"modal-content"},h={class:"user-info"},_={class:"user-stats"};var f={__name:"AdminUserList",setup(e){const l=(0,o.Pj)(),t=(0,s.KR)(""),f=(0,s.KR)(""),U=(0,s.KR)(""),C=(0,s.KR)(null),y=(0,s.KR)(!1);(0,a.sV)((async()=>{y.value=!0;try{await l.dispatch("user/fetchUsers")}finally{y.value=!1}}));const g=(0,a.EW)((()=>l.getters["user/getAllUsers"])),b=(0,a.EW)((()=>{let e=[...g.value];if(t.value){const l=t.value.toLowerCase();e=e.filter((e=>(e?.name?.toLowerCase()||"").includes(l)||(e?.email?.toLowerCase()||"").includes(l)))}return f.value&&(e=e.filter((e=>e?.role===f.value))),U.value&&(e=e.filter((e=>e?.status===U.value))),e})),w=e=>new Date(e).toLocaleDateString(),A=async(e,t)=>{y.value=!0;try{await l.dispatch("user/updateUserRole",{userId:e,role:t}),await l.dispatch("user/fetchUsers")}finally{y.value=!1}},D=async(e,t)=>{y.value=!0;try{await l.dispatch("user/updateUserStatus",{userId:e,status:t}),await l.dispatch("user/fetchUsers")}finally{y.value=!1}},V=async e=>{if(confirm("Are you sure you want to delete this user?")){y.value=!0;try{await l.dispatch("user/deleteUser",e),alert("User deleted successfully")}catch(t){alert("Could not delete user. Please try again."),console.log("Delete operation:",t)}finally{y.value=!1}}},E=e=>{C.value=e};return(e,l)=>((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",i,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),placeholder:"Search users..."},null,512),[[u.Jo,t.value]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>f.value=e)},l[4]||(l[4]=[(0,a.Lk)("option",{value:""},"All Roles",-1),(0,a.Lk)("option",{value:"user"},"User",-1),(0,a.Lk)("option",{value:"admin"},"Admin",-1)]),512),[[u.u1,f.value]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>U.value=e)},l[5]||(l[5]=[(0,a.Lk)("option",{value:""},"All Status",-1),(0,a.Lk)("option",{value:"active"},"Active",-1),(0,a.Lk)("option",{value:"inactive"},"Inactive",-1),(0,a.Lk)("option",{value:"blocked"},"Blocked",-1)]),512),[[u.u1,U.value]])]),(0,a.Lk)("table",d,[l[8]||(l[8]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Name"),(0,a.Lk)("th",null,"Email"),(0,a.Lk)("th",null,"Role"),(0,a.Lk)("th",null,"Status"),(0,a.Lk)("th",null,"Joined Date"),(0,a.Lk)("th",null,"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.value,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,n.v_)(e.id),1),(0,a.Lk)("td",null,(0,n.v_)(e.name),1),(0,a.Lk)("td",null,(0,n.v_)(e.email),1),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":l=>e.role=l,onChange:l=>A(e.id,e.role)},l[6]||(l[6]=[(0,a.Lk)("option",{value:"user"},"User",-1),(0,a.Lk)("option",{value:"admin"},"Admin",-1)]),40,v),[[u.u1,e.role]])]),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":l=>e.status=l,onChange:l=>D(e.id,e.status)},l[7]||(l[7]=[(0,a.Lk)("option",{value:"active"},"Active",-1),(0,a.Lk)("option",{value:"inactive"},"Inactive",-1),(0,a.Lk)("option",{value:"blocked"},"Blocked",-1)]),40,k),[[u.u1,e.status]])]),(0,a.Lk)("td",null,(0,n.v_)(w(e.joinedDate)),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:l=>E(e)},"View Details",8,c),(0,a.Lk)("button",{onClick:l=>V(e.id)},"Delete",8,L)])])))),128))])]),C.value?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("div",m,[l[17]||(l[17]=(0,a.Lk)("h3",null,"User Details",-1)),(0,a.Lk)("div",h,[(0,a.Lk)("p",null,[l[9]||(l[9]=(0,a.Lk)("strong",null,"Name:",-1)),(0,a.eW)(" "+(0,n.v_)(C.value.name),1)]),(0,a.Lk)("p",null,[l[10]||(l[10]=(0,a.Lk)("strong",null,"Email:",-1)),(0,a.eW)(" "+(0,n.v_)(C.value.email),1)]),(0,a.Lk)("p",null,[l[11]||(l[11]=(0,a.Lk)("strong",null,"Phone:",-1)),(0,a.eW)(" "+(0,n.v_)(C.value.phone),1)]),(0,a.Lk)("p",null,[l[12]||(l[12]=(0,a.Lk)("strong",null,"Address:",-1)),(0,a.eW)(" "+(0,n.v_)(C.value.address),1)]),(0,a.Lk)("p",null,[l[13]||(l[13]=(0,a.Lk)("strong",null,"Role:",-1)),(0,a.eW)(" "+(0,n.v_)(C.value.role),1)]),(0,a.Lk)("p",null,[l[14]||(l[14]=(0,a.Lk)("strong",null,"Status:",-1)),(0,a.eW)(" "+(0,n.v_)(C.value.status),1)]),(0,a.Lk)("p",null,[l[15]||(l[15]=(0,a.Lk)("strong",null,"Joined Date:",-1)),(0,a.eW)(" "+(0,n.v_)(w(C.value.joinedDate)),1)])]),(0,a.Lk)("div",_,[l[16]||(l[16]=(0,a.Lk)("h4",null,"User Statistics",-1)),(0,a.Lk)("p",null,"Total Orders: "+(0,n.v_)(C.value.totalOrders),1),(0,a.Lk)("p",null,"Total Spent: $"+(0,n.v_)(C.value?.totalSpent?.toFixed(2)||"0.00"),1),(0,a.Lk)("p",null,"Last Order: "+(0,n.v_)(C.value.lastOrderDate?w(C.value.lastOrderDate):"N/A"),1)]),(0,a.Lk)("button",{onClick:l[3]||(l[3]=e=>C.value=null)},"Close")])])):(0,a.Q3)("",!0)]))}},U=t(6262);const C=(0,U.A)(f,[["__scopeId","data-v-67e43e19"]]);var y=C;const g={class:"admin-users-view"};var b={__name:"AdminUserView",setup(e){return(e,l)=>((0,a.uX)(),(0,a.CE)("div",g,[l[0]||(l[0]=(0,a.Lk)("h1",null,"User Management",-1)),(0,a.bF)(y)]))}};const w=(0,U.A)(b,[["__scopeId","data-v-22c4fe26"]]);var A=w}}]);
//# sourceMappingURL=181.d7486fc3.js.map